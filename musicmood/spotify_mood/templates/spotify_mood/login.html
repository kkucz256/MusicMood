<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Witaj w MusicMood!</title>
    {% load static %}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static 'spotify_mood/custom_btn.css' %}">
    <link rel="stylesheet" href="{% static 'spotify_mood/login_page.css' %}">
</head>
<body>
<div class="container-sm d-flex flex-column align-items-center justify-content-center" style="min-height: 100vh;">
    <div class='login-container'>
        <img src="{% static 'spotify_mood/logo.png' %}" alt="my img" width="60%" height="auto">
        <h1 class="fancy">MusicMood</h1>
        <h3>Aplikacja do pracy inżynierskiej - Krzysztof Kucz</h3>

        <form action="{% url 'spotify_mood:log_in' %}" method="post" class="d-flex justify-content-center">
            {% csrf_token %}
            <button class="btn" type="submit">
                <svg width="220px" height="70px" viewBox="0 0 220 70" style="border: 1px solid var(--detal); border-radius: 4px;">
                    <polyline points="219,1 219,69 1,69 1,1 219,1" class="bg-line"></polyline>
                    <polyline points="219,1 219,69 1,69 1,1 219,1" class="hl-line"></polyline>
                </svg>
                <span>Zaloguj się ze Spotify</span>
            </button>
        </form>
    </div>
</div>
<script>
    const params = new URLSearchParams(window.location.search);
    const message = params.get('message');

    if (message === "Token expired") {
        alert("Token dostępu wygasł (minęło 1h). Zaloguj się ponownie");
    }

    document.addEventListener('DOMContentLoaded', () => {
        const currentTheme = localStorage.getItem('theme');
        if (currentTheme) {
            document.documentElement.setAttribute('data-theme', currentTheme);
            if (currentTheme === 'dark') {
                document.documentElement.classList.add('dark-theme');
            } else {
                document.documentElement.classList.remove('dark-theme');
            }
        }
    });
</script>
</body>
</html>